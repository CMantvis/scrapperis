(this["webpackJsonpscrapper-frontend"]=this["webpackJsonpscrapper-frontend"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/logo.ed268b80.PNG"},32:function(e,t,a){e.exports=a.p+"static/media/cvonline.b02ab2ff.PNG"},33:function(e,t,a){e.exports=a.p+"static/media/cvBankaslogo.0c887636.svg"},38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},44:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),c=a.n(o),l=(a(43),a(2)),s=(a(44),a(15)),m=a.n(s),i=a(5);function u(e){var t=e.user;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Darbu Paieska v1"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(i.c,{className:"nav-item nav-link",to:"/jobs"},"Jobs"),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.c,{className:"nav-item nav-link",to:"/login"},"Login"),r.a.createElement(i.c,{className:"nav-item nav-link",to:"/register"},"Register")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.c,{className:"nav-item nav-link",to:"/profile"},t.email),r.a.createElement(i.c,{className:"nav-item nav-link",to:"/logout"},"Logout"),r.a.createElement(i.c,{className:"nav-item nav-link",to:"/posts"},"Saved posts")))))}var p=a(1),d=a(36),h=a(3),b=a.n(h);function v(e){var t=e.items,a=e.onItemSelect,n=e.selectedItem;return r.a.createElement("ul",{className:"list-group list-group-horizontal"},t.map((function(e,t){return r.a.createElement("li",{onClick:function(){return a(e)},key:t,className:e===n?"list-group-item active":"list-group-item"},e)})))}function g(e){var t=e.name,a=e.value,n=e.onChange,o=e.placeholder,c=e.type,l=e.error;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:t}),r.a.createElement("input",{value:a,onChange:n,id:t,name:t,type:c,className:"form-control",placeholder:o}),l&&r.a.createElement("div",{className:"alert alert-danger"},l))}function f(e){var t=e.onSubmit,a=e.type,n=e.value,o=e.onChange,c=e.placeholder,l=e.names;return r.a.createElement("form",{style:{marginTop:"40px"},onSubmit:function(e){return t(e)},className:"form-inline justify-content-center"},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"form-group mx-sm-3 mb-2"},r.a.createElement(g,{type:a,value:n,name:l,onChange:o,placeholder:c}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Search"))))}var E=a(31),j=a(32),w=a(33);function y(e){var t=e.user,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],s=o[1],m=Object(n.useState)(""),i=Object(l.a)(m,2),u=i[0],p=i[1],h=Object(n.useState)("All sites"),g=Object(l.a)(h,2),y=g[0],k=g[1],N=Object(n.useState)([]),S=Object(l.a)(N,2),O=S[0],x=S[1],A=Object(n.useState)(!1),C=Object(l.a)(A,2),_=C[0],P=C[1];Object(n.useEffect)((function(){x(function(e){var t;t=0===c.length?[]:["All sites"];for(var a=0;a<e.length;a++)t.includes(e[a].searchedSite)||t.push(e[a].searchedSite);return t}(c))}),[c]);var I;I="All sites"===y?c:y?c.filter((function(e){return e.searchedSite===y})):c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{onSubmit:function(e){e.preventDefault(),P(!0),b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),t?b.a.post("https://mysterious-journey-11608.herokuapp.com/api/jobs",{keyword:u}).then((function(){return b.a.get("https://mysterious-journey-11608.herokuapp.com/api/jobs/auth/".concat(u))})).then((function(e){e.data.map((function(e){return"https://www.cvbankas.lt"===e.searchedSite?e.logo=w:"https://www.cvonline.lt"===e.searchedSite?e.logo=j:"https://www.cvmarket.lt"===e.searchedSite&&(e.logo=E),e})),s(e.data)})).then((function(){return P(!1)})):b.a.post("https://mysterious-journey-11608.herokuapp.com/api/jobs",{keyword:u}).then((function(){return b.a.get("https://mysterious-journey-11608.herokuapp.com/api/jobs/".concat(u))})).then((function(e){e.data.map((function(e){return"https://www.cvbankas.lt"===e.searchedSite?e.logo=w:"https://www.cvonline.lt"===e.searchedSite?e.logo=j:"https://www.cvmarket.lt"===e.searchedSite&&(e.logo=E),e})),s(e.data)})).then((function(){return P(!1)})),p("")},type:"text",value:u,names:"keyword",onChange:function(e){p(e.target.value)},placeholder:"Keyword"}),r.a.createElement("h3",{className:"job-length"},I.length>0?"".concat(I.length," jobs found"):null),r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"search-filter"},r.a.createElement(v,{items:O,onItemSelect:function(e){k(e)},selectedItem:y})),_?r.a.createElement("h3",{className:"loading"},"Scrapping data, this might take a couple second ....."):null,0===c.length&&!1===_?r.a.createElement("h3",{className:"guide"},"Enter the keyword to find jobs from all the supported Sites"):I.map((function(e){return r.a.createElement("div",{className:"job-container",key:e._id},r.a.createElement("div",{className:"job-row1"},r.a.createElement("a",{className:"job-title",href:e.jobUrl},r.a.createElement("h5",null,e.jobTitle)),r.a.createElement("p",{className:"job-city"},e.city),r.a.createElement("p",{className:"job-date"},"Prideta: ",e.postDate),t&&r.a.createElement("i",{className:e.liked?"fas fa-star fa-lg":"far fa-star fa-lg",onClick:function(){return t=e._id,s(Object(d.a)(c.map((function(e){return e._id===t&&(e.liked=!e.liked),e})))),void c.map((function(e){e._id===t&&(e.liked?e.liked&&(b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),b.a.post("https://mysterious-journey-11608.herokuapp.com/api/favorites/like",{id:t})):(b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),b.a.delete("https://mysterious-journey-11608.herokuapp.com/api/favorites/unlike/".concat(t))))}));var t}})),r.a.createElement("div",{className:"job-row2"},r.a.createElement("p",{className:"job-company"},e.companyName),r.a.createElement("img",{className:"job-logo",src:e.logo,alt:"searched site logo"})),r.a.createElement("div",{className:"job-row3"},r.a.createElement("p",{className:"job-salary"},"Alga nenurodyta"===e.salaryAmount?"Alga nenurodyta":"".concat(e.salaryAmount," eur")," "),r.a.createElement("p",{className:"job-scrape-date"},e.dateScrapped.slice(0,10))))}))))}var k=a(11),N=a.n(k),S=a(17),O=a(16);function x(e,t){return b.a.post("https://mysterious-journey-11608.herokuapp.com/api/auth/login",{email:e,password:t})}function A(){try{var e=localStorage.getItem("token");return m()(e)}catch(t){return null}}function C(e){var t=Object(p.g)(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],m=Object(n.useState)(""),i=Object(l.a)(m,2),u=i[0],d=i[1],h=Object(n.useState)({}),b=Object(l.a)(h,2),v=b[0],f=b[1],E=function(){var e={};return""===c.trim()&&(e.email="Email is required."),""===u.trim()&&(e.password="Password is required"),0===Object.keys(e).length?null:e},j=function(){var a=Object(O.a)(N.a.mark((function a(n){var r,o,l,s;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),r=E(),f(null===r?{}:r),!r){a.next=5;break}return a.abrupt("return");case 5:return a.prev=5,a.next=8,x(c,u);case 8:o=a.sent,localStorage.setItem("token",o.headers["x-auth-token"]),(l=e.location.state)?(t.push(l.from.pathname),window.location.reload(!0)):(t.push("/"),window.location.reload(!0)),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(5),a.t0.response&&400===a.t0.response.status&&((s=Object(S.a)({},r)).email=a.t0.response.data,f(s));case 17:case"end":return a.stop()}}),a,null,[[5,14]])})));return function(e){return a.apply(this,arguments)}}();return A()?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{style:{marginTop:"40px"},className:"form",onSubmit:j},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"form-group mx-sm-3 mb-2"},r.a.createElement(g,{type:"email",value:c,onChange:function(e){s(e.target.value)},name:"email",error:v.email,placeholder:"Email"}),r.a.createElement(g,{type:"password",value:u,onChange:function(e){d(e.target.value)},name:"password",error:v.password,placeholder:"password"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"5px"}},"Login")))))}function _(){var e=Object(p.g)();return Object(n.useEffect)((function(){localStorage.removeItem("token"),e.push("/"),window.location.reload(!0)}),[]),null}function P(e,t,a){return b.a.post("https://mysterious-journey-11608.herokuapp.com/api/users/signup",{email:e,password:t,password2:a})}function I(){var e=Object(p.g)(),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),i=m[0],u=m[1],d=Object(n.useState)(""),h=Object(l.a)(d,2),b=h[0],v=h[1],f=Object(n.useState)({}),E=Object(l.a)(f,2),j=E[0],w=E[1],y=function(){var e={};return""===o.trim()&&(e.email="Email is required."),""===i.trim()&&(e.password="Password is required"),""===b.trim()&&(e.password2="Password is required"),i.trim()!==b.trim()&&(e.password2="Passwords must match each other"),0===Object.keys(e).length?null:e},k=function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=y(),w(null===n?{}:n),!n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,P(o,i,b);case 8:e.push("/"),window.location.reload(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),t.t0.response&&400===t.t0.response.status&&((r=Object(S.a)({},n)).email=t.t0.response.data,w(r));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{style:{marginTop:"40px"},className:"form",onSubmit:k},r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"form-group mx-sm-3 mb-2"},r.a.createElement(g,{type:"email",value:o,onChange:function(e){c(e.target.value)},name:"email",error:j.email,placeholder:"Email"}),r.a.createElement(g,{type:"password",value:i,onChange:function(e){u(e.target.value)},name:"password",error:j.password,placeholder:"password"}),r.a.createElement(g,{type:"password",value:b,onChange:function(e){v(e.target.value)},name:"password2",error:j.password2,placeholder:"Repeat password"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"5px"}},"Submit")))))}var T=a(31),D=a(32),R=a(33);function F(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),b.a.get("https://mysterious-journey-11608.herokuapp.com/api/favorites").then((function(e){e.data.map((function(e){return"https://www.cvbankas.lt"===e.searchedSite?e.logo=R:"https://www.cvonline.lt"===e.searchedSite?e.logo=D:"https://www.cvmarket.lt"===e.searchedSite&&(e.logo=T),e})),o(e.data)}))}),[]),r.a.createElement(r.a.Fragment,null,0===a.length?r.a.createElement("div",null,"hello"):a.map((function(e,t){return r.a.createElement("div",{className:"job-container",key:e._id},r.a.createElement("div",{className:"job-row1"},r.a.createElement("a",{className:"job-title",href:e.jobUrl},r.a.createElement("h5",null,e.jobTitle)),r.a.createElement("p",{className:"job-city"},e.city),r.a.createElement("p",{className:"job-date"},"Prideta: ",e.postDate)),r.a.createElement("div",{className:"job-row2"},r.a.createElement("p",{className:"job-company"},e.companyName),r.a.createElement("img",{className:"job-logo",src:e.logo,alt:"searched site logo"})),r.a.createElement("div",{className:"job-row3"},r.a.createElement("p",{className:"job-salary"},"Alga nenurodyta"===e.salaryAmount?"Alga nenurodyta":"".concat(e.salaryAmount," eur")," "),r.a.createElement("p",{className:"job-site"},e.searchedSite)))})))}function L(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){b.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),b.a.get("https://mysterious-journey-11608.herokuapp.com/api/users/me").then((function(e){return c(e.data)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"email"},"Your email: ",o.email),r.a.createElement("div",{className:"status"},"Your status: ",o.isAdmin?"Admin":"User"))}var U=a(37);function q(e){e.path;var t=e.component,a=e.render,n=Object(U.a)(e,["path","component","render"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return A()?t?r.a.createElement(t,e):a(e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var W=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){try{var e=localStorage.getItem("token"),t=m()(e);o(t)}catch(a){}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u,{user:a}),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/jobs",render:function(e){return r.a.createElement(y,Object.assign({},e,{user:a}))}}),r.a.createElement(p.b,{path:"/login",component:C}),r.a.createElement(p.b,{path:"/logout",component:_}),r.a.createElement(p.b,{path:"/register",exact:!0,component:I}),r.a.createElement(q,{path:"/posts",component:F}),r.a.createElement(q,{path:"/profile",component:L}),r.a.createElement(p.a,{from:"/",exact:!0,to:"/jobs"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);console.log("Superman",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://mysterious-journey-11608.herokuapp.com/api"}).REACT_APP_NAME),c.a.render(r.a.createElement(i.a,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.01159ecc.chunk.js.map